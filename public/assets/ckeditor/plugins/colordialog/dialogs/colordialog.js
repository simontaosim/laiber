/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
<<<<<<< HEAD

CKEDITOR.dialog.add("colordialog",function(t){function n(){f.getById(o).removeStyle("background-color");p.getContentElement("picker","selectedColor").setValue("");j&&j.removeAttribute("aria-selected");j=null}function u(a){var a=a.data.getTarget(),b;if("td"==a.getName()&&(b=a.getChild(0).getHtml()))j=a,j.setAttribute("aria-selected",!0),p.getContentElement("picker","selectedColor").setValue(b)}function y(a){for(var a=a.replace(/^#/,""),b=0,c=[];2>=b;b++)c[b]=parseInt(a.substr(2*b,2),16);return"#"+
(165<=0.2126*c[0]+0.7152*c[1]+0.0722*c[2]?"000":"fff")}function v(a){!a.name&&(a=new CKEDITOR.event(a));var b=!/mouse/.test(a.name),c=a.data.getTarget(),e;if("td"==c.getName()&&(e=c.getChild(0).getHtml()))q(a),b?g=c:w=c,b&&(c.setStyle("border-color",y(e)),c.setStyle("border-style","dotted")),f.getById(k).setStyle("background-color",e),f.getById(l).setHtml(e)}function q(a){if(a=!/mouse/.test(a.name)&&g){var b=a.getChild(0).getHtml();a.setStyle("border-color",b);a.setStyle("border-style","solid")}!g&&
!w&&(f.getById(k).removeStyle("background-color"),f.getById(l).setHtml("&nbsp;"))}function z(a){var b=a.data,c=b.getTarget(),e=b.getKeystroke(),d="rtl"==t.lang.dir;switch(e){case 38:if(a=c.getParent().getPrevious())a=a.getChild([c.getIndex()]),a.focus();b.preventDefault();break;case 40:if(a=c.getParent().getNext())(a=a.getChild([c.getIndex()]))&&1==a.type&&a.focus();b.preventDefault();break;case 32:case 13:u(a);b.preventDefault();break;case d?37:39:if(a=c.getNext())1==a.type&&(a.focus(),b.preventDefault(!0));
else if(a=c.getParent().getNext())if((a=a.getChild([0]))&&1==a.type)a.focus(),b.preventDefault(!0);break;case d?39:37:if(a=c.getPrevious())a.focus(),b.preventDefault(!0);else if(a=c.getParent().getPrevious())a=a.getLast(),a.focus(),b.preventDefault(!0)}}var r=CKEDITOR.dom.element,f=CKEDITOR.document,h=t.lang.colordialog,p,x={type:"html",html:"&nbsp;"},j,g,w,m=function(a){return CKEDITOR.tools.getNextId()+"_"+a},k=m("hicolor"),l=m("hicolortext"),o=m("selhicolor"),i;(function(){function a(a,d){for(var s=
a;s<a+3;s++){var e=new r(i.$.insertRow(-1));e.setAttribute("role","row");for(var f=d;f<d+3;f++)for(var g=0;6>g;g++)b(e.$,"#"+c[f]+c[g]+c[s])}}function b(a,c){var b=new r(a.insertCell(-1));b.setAttribute("class","ColorCell");b.setAttribute("tabIndex",-1);b.setAttribute("role","gridcell");b.on("keydown",z);b.on("click",u);b.on("focus",v);b.on("blur",q);b.setStyle("background-color",c);b.setStyle("border","1px solid "+c);b.setStyle("width","14px");b.setStyle("height","14px");var d=m("color_table_cell");
b.setAttribute("aria-labelledby",d);b.append(CKEDITOR.dom.element.createFromHtml('<span id="'+d+'" class="cke_voice_label">'+c+"</span>",CKEDITOR.document))}i=CKEDITOR.dom.element.createFromHtml('<table tabIndex="-1" aria-label="'+h.options+'" role="grid" style="border-collapse:separate;" cellspacing="0"><caption class="cke_voice_label">'+h.options+'</caption><tbody role="presentation"></tbody></table>');i.on("mouseover",v);i.on("mouseout",q);var c="00 33 66 99 cc ff".split(" ");a(0,0);a(3,0);a(0,
3);a(3,3);var e=new r(i.$.insertRow(-1));e.setAttribute("role","row");for(var d=0;6>d;d++)b(e.$,"#"+c[d]+c[d]+c[d]);for(d=0;12>d;d++)b(e.$,"#000000")})();return{title:h.title,minWidth:360,minHeight:220,onLoad:function(){p=this},onHide:function(){n();var a=g.getChild(0).getHtml();g.setStyle("border-color",a);g.setStyle("border-style","solid");f.getById(k).removeStyle("background-color");f.getById(l).setHtml("&nbsp;");g=null},contents:[{id:"picker",label:h.title,accessKey:"I",elements:[{type:"hbox",
padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:"<div></div>",onLoad:function(){CKEDITOR.document.getById(this.domId).append(i)},focus:function(){(g||this.getElement().getElementsByTag("td").getItem(0)).focus()}},x,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+h.highlight+'</span><div id="'+k+'" style="border: 1px solid; height: 74px; width: 74px;"></div><div id="'+l+'">&nbsp;</div><span>'+h.selected+'</span><div id="'+o+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},
{type:"text",label:h.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 76px;margin-top:4px",onChange:function(){try{f.getById(o).setStyle("background-color",this.getValue())}catch(a){n()}}},x,{type:"button",id:"clear",label:h.clear,onClick:n}]}]}]}]}});
=======
CKEDITOR.dialog.add("colordialog",function(e){function t(){f.getById(T).removeStyle("background-color"),s.getContentElement("picker","selectedColor").setValue(""),l&&l.removeAttribute("aria-selected"),l=null}function n(e){var t,e=e.data.getTarget();"td"==e.getName()&&(t=e.getChild(0).getHtml())&&(l=e,l.setAttribute("aria-selected",!0),s.getContentElement("picker","selectedColor").setValue(t))}function i(e){for(var e=e.replace(/^#/,""),t=0,n=[];2>=t;t++)n[t]=parseInt(e.substr(2*t,2),16);return"#"+(165<=.2126*n[0]+.7152*n[1]+.0722*n[2]?"000":"fff")}function o(e){!e.name&&(e=new CKEDITOR.event(e));var t,n=!/mouse/.test(e.name),o=e.data.getTarget();"td"==o.getName()&&(t=o.getChild(0).getHtml())&&(a(e),n?c=o:u=o,n&&(o.setStyle("border-color",i(t)),o.setStyle("border-style","dotted")),f.getById(v).setStyle("background-color",t),f.getById(E).setHtml(t))}function a(e){if(e=!/mouse/.test(e.name)&&c){var t=e.getChild(0).getHtml();e.setStyle("border-color",t),e.setStyle("border-style","solid")}!c&&!u&&(f.getById(v).removeStyle("background-color"),f.getById(E).setHtml("&nbsp;"))}function r(t){var i=t.data,o=i.getTarget(),a=i.getKeystroke(),r="rtl"==e.lang.dir;switch(a){case 38:(t=o.getParent().getPrevious())&&(t=t.getChild([o.getIndex()]),t.focus()),i.preventDefault();break;case 40:(t=o.getParent().getNext())&&(t=t.getChild([o.getIndex()]))&&1==t.type&&t.focus(),i.preventDefault();break;case 32:case 13:n(t),i.preventDefault();break;case r?37:39:(t=o.getNext())?1==t.type&&(t.focus(),i.preventDefault(!0)):(t=o.getParent().getNext())&&(t=t.getChild([0]))&&1==t.type&&(t.focus(),i.preventDefault(!0));break;case r?39:37:(t=o.getPrevious())?(t.focus(),i.preventDefault(!0)):(t=o.getParent().getPrevious())&&(t=t.getLast(),t.focus(),i.preventDefault(!0))}}var s,l,c,u,d,h=CKEDITOR.dom.element,f=CKEDITOR.document,p=e.lang.colordialog,m={type:"html",html:"&nbsp;"},g=function(e){return CKEDITOR.tools.getNextId()+"_"+e},v=g("hicolor"),E=g("hicolortext"),T=g("selhicolor");return function(){function e(e,n){for(var o=e;e+3>o;o++){var a=new h(d.$.insertRow(-1));a.setAttribute("role","row");for(var r=n;n+3>r;r++)for(var s=0;6>s;s++)t(a.$,"#"+i[r]+i[s]+i[o])}}function t(e,t){var i=new h(e.insertCell(-1));i.setAttribute("class","ColorCell"),i.setAttribute("tabIndex",-1),i.setAttribute("role","gridcell"),i.on("keydown",r),i.on("click",n),i.on("focus",o),i.on("blur",a),i.setStyle("background-color",t),i.setStyle("border","1px solid "+t),i.setStyle("width","14px"),i.setStyle("height","14px");var s=g("color_table_cell");i.setAttribute("aria-labelledby",s),i.append(CKEDITOR.dom.element.createFromHtml('<span id="'+s+'" class="cke_voice_label">'+t+"</span>",CKEDITOR.document))}d=CKEDITOR.dom.element.createFromHtml('<table tabIndex="-1" aria-label="'+p.options+'" role="grid" style="border-collapse:separate;" cellspacing="0"><caption class="cke_voice_label">'+p.options+'</caption><tbody role="presentation"></tbody></table>'),d.on("mouseover",o),d.on("mouseout",a);var i="00 33 66 99 cc ff".split(" ");e(0,0),e(3,0),e(0,3),e(3,3);var s=new h(d.$.insertRow(-1));s.setAttribute("role","row");for(var l=0;6>l;l++)t(s.$,"#"+i[l]+i[l]+i[l]);for(l=0;12>l;l++)t(s.$,"#000000")}(),{title:p.title,minWidth:360,minHeight:220,onLoad:function(){s=this},onHide:function(){t();var e=c.getChild(0).getHtml();c.setStyle("border-color",e),c.setStyle("border-style","solid"),f.getById(v).removeStyle("background-color"),f.getById(E).setHtml("&nbsp;"),c=null},contents:[{id:"picker",label:p.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:"<div></div>",onLoad:function(){CKEDITOR.document.getById(this.domId).append(d)},focus:function(){(c||this.getElement().getElementsByTag("td").getItem(0)).focus()}},m,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+p.highlight+'</span><div id="'+v+'" style="border: 1px solid; height: 74px; width: 74px;"></div><div id="'+E+'">&nbsp;</div><span>'+p.selected+'</span><div id="'+T+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:p.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 76px;margin-top:4px",onChange:function(){try{f.getById(T).setStyle("background-color",this.getValue())}catch(e){t()}}},m,{type:"button",id:"clear",label:p.clear,onClick:t}]}]}]}]}});
>>>>>>> 1df0c2cc27677cb2b125228246d2f87ee6af3d45
