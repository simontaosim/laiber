<div class="idea_head">
   <div class="idea_head_1">

    <button class="am-btn am-btn-danger" id="post_btn">发帖</button>
<div class="am-modal am-modal-loading am-modal-no-btn" tabindex="-1" id="my-modal-loading">
  <div class="am-modal-dialog">
    <div class="am-modal-hd">正在载入...</div>
    <div class="am-modal-bd">
      <span class="am-icon-spinner am-icon-spin"></span>
    </div>
  </div>
</div>


<div class="am-modal am-modal-alert" tabindex="-2" id="my-alert">
  <div class="am-modal-dialog" style="height:500px;overflow:scroll;">
    <div class="am-modal-hd">创意详情</div>
    <hr>
    <div class="ideaContent">
    <article data-am-widget="paragraph" class="am-paragraph am-paragraph-default"
data-am-paragraph="{ tableScrollable: true, pureview: true }">
  
</article>
 <hr>
  <div class="idea_author">
       <div class="idea_author_img"><a href="#"><img class="am-circle" src="/assets/default_portrait1.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a></div>
       <div class="idea_author_name" style="
    font-weight: 600;">陈芸莹</div>
    <div class="ideaClassfy" style="
    font-weight: 600;">#社会科学#</div>
   </div>
    <hr>
  <div class="ideaDiscuss">
        <div class="idea_author_img"><a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a></div>
        <div class="i_input">
                <textarea placeholder="说点什么吧..." class="W_input" action-type="check" cols="" rows="" name="" node-type="textEl" range="0&amp;0" style="overflow: hidden; line-height: 40px; outline: none; height: 40px;width:80%;border-radius: 2px; border: 1px solid rgb(204,204,204);"></textarea>
            </div>
            <div class="discussButton"><button class="am-btn am-btn-primary am-btn-xs">发送</button></div>
            <div class="alsoCollect">收藏了该创意的还有:<a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a>
<a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a>
           <a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a>            
            </div>
             <hr>    
  </div>
<div class="allDiscuss">
    <div class="idea_author_img"><a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a></div>
    <div class="allDiscuss_name">
    <span>一直特例独行的猪:</span><span>&nbsp;&nbsp;&nbsp;</span><span class="discusstext">钟恺是个傻逼啊！！！！！</span>
    </div>
    <div class="allDdiscuss_time">今日12:08</div>
    </div>                             
    <hr> 
    <div class="allDiscuss">
    <div class="idea_author_img"><a href="#"><img class="am-circle" src="/assets/default_portrait2.jpg" style="width:40px;margin-left:20px;" height="40px" alt=""/></a></div>
    <div class="allDiscuss_name">
    <span>一直特例独行的猪:</span><span>&nbsp;&nbsp;&nbsp;</span><span class="discusstext">钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！钟恺是个傻逼啊！！！！！</span>
    </div>
     <div class="allDdiscuss_time">今日12:08</div>
    </div>               
    <hr> 

  
  
   </div>

    <div class="am-modal-footer">
      <span class="am-modal-btn">确定</span>
    </div>
  </div>
</div>



<div class="am-popup"  id="my-popup">
  <div class="am-popup-inner">
    <div class="am-popup-hd">
      <h4 class="am-popup-title">创建创意</h4>
      <span data-am-modal-close
            class="am-close">&times;</span>
    </div>

    <div class="am-popup-bd" style="background-color: white;padding:0px;">
    <div class="ideaTitle">
     <div class="am-form-group">
      <%= form_for @post, :html => { :class => "am-form" }  do |f| %>
      <%= hidden_field_tag :from_index,  "1" %>
      <% if session[:progress] %>
      <%= f.hidden_field :user_id, value: UserSession.find(session[:progress].fetch("_id").fetch("$oid")).user.id %>
      <% end %>
                <fieldset>
                  <%= f.label "创意标题", for: 'doc-ta-1' %>
                   <div>
                     <%= f.text_field :title, placeholder: '' %>
                  </div>
                </fieldset>
                <fieldset>
                      <div class="am-form-group">
                          <div><label for="doc-ta-1">文本域</label></div>
                    <%= f.kindeditor :content,  :items =>
                    [
                      'source', 'justifyleft', 'justifycenter', 'justifyright', 'justifyfull',
                      'formatblock', 'strikethrough', 'lineheight', 'removeformat', '|', 'image', 'multiimage', 'hr', 'link', 'unlink'
                    ]
                     %>
                  </div>
                </fieldset>
      <% end %>
     </div>
    </div>
    </div>
<!--    tag-->
   <div class="tags-list">
    <ul class="tags-list-item nav nav-pills">
    <li id="tag-社交" class="ladda-button tag first" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E7%A4%BE%E4%BA%A4" data-remote="true">
        <span class="ladda-label">社交</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-硬件" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E7%A1%AC%E4%BB%B6" data-remote="true">
        <span class="ladda-label">硬件</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-媒体" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%AA%92%E4%BD%93" data-remote="true">
        <span class="ladda-label">媒体</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-游戏" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%B8%B8%E6%88%8F" data-remote="true">
        <span class="ladda-label">游戏</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-视频" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E8%A7%86%E9%A2%91" data-remote="true">
        <span class="ladda-label">视频</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-招聘" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%8B%9B%E8%81%98" data-remote="true">
        <span class="ladda-label">招聘</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-旅游" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%97%85%E6%B8%B8" data-remote="true">
        <span class="ladda-label">旅游</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-教育" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%95%99%E8%82%B2" data-remote="true">
        <span class="ladda-label">教育</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-金融" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E9%87%91%E8%9E%8D" data-remote="true">
        <span class="ladda-label">金融</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-体育" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E4%BD%93%E8%82%B2" data-remote="true">
        <span class="ladda-label">体育</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-工具" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%B7%A5%E5%85%B7" data-remote="true">
        <span class="ladda-label">工具</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-娱乐" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%A8%B1%E4%B9%90" data-remote="true">
        <span class="ladda-label">娱乐</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-婚恋" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%A9%9A%E6%81%8B" data-remote="true">
        <span class="ladda-label">婚恋</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-健康" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%81%A5%E5%BA%B7" data-remote="true">
        <span class="ladda-label">健康</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-医疗" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%8C%BB%E7%96%97" data-remote="true">
        <span class="ladda-label">医疗</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-亲子" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E4%BA%B2%E5%AD%90" data-remote="true">
        <span class="ladda-label">亲子</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-营销" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E8%90%A5%E9%94%80" data-remote="true">
        <span class="ladda-label">营销</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-安全" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%AE%89%E5%85%A8" data-remote="true">
        <span class="ladda-label">安全</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-文化" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%96%87%E5%8C%96" data-remote="true">
        <span class="ladda-label">文化</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-阅读" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E9%98%85%E8%AF%BB" data-remote="true">
        <span class="ladda-label">阅读</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-公益" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%85%AC%E7%9B%8A" data-remote="true">
        <span class="ladda-label">公益</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-创意" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%88%9B%E6%84%8F" data-remote="true">
        <span class="ladda-label">创意</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-交通" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E4%BA%A4%E9%80%9A" data-remote="true">
        <span class="ladda-label">交通</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-O2O" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=O2O" data-remote="true">
        <span class="ladda-label">O2O</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-P2P" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=P2P" data-remote="true">
        <span class="ladda-label">P2P</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-LBS" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=LBS" data-remote="true">
        <span class="ladda-label">LBS</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-共享经济" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E5%85%B1%E4%BA%AB%E7%BB%8F%E6%B5%8E" data-remote="true">
        <span class="ladda-label">共享经济</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-智能家居" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85" data-remote="true">
        <span class="ladda-label">智能家居</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-企业服务" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E4%BC%81%E4%B8%9A%E6%9C%8D%E5%8A%A1" data-remote="true">
        <span class="ladda-label">企业服务</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-电子商务" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E7%94%B5%E5%AD%90%E5%95%86%E5%8A%A1" data-remote="true">
        <span class="ladda-label">电子商务</span>
        <span class="ladda-spinner"></span>
</a>    </li>
    <li id="tag-生活消费" class="ladda-button tag" data-style="zoom-in" data-spinner-color="#3be0c7">
      <a href="/projects?tag=%E7%94%9F%E6%B4%BB%E6%B6%88%E8%B4%B9" data-remote="true">
        <span class="ladda-label">生活消费</span>
        <span class="ladda-spinner"></span>
</a>    </li>
</ul>
   <p><button type="submit" class="am-btn am-btn-default">提交</button></p>
</div>
<!--   tag-->

    
  </div>
  
</div>


    </div>


 <div class="idea_head_2">
       <form class="am-topbar-form am-topbar-left am-form-inline am-topbar-right" role="search">
          <div class="am-form-group">
            <input type="text" class="am-form-field am-input-sm" placeholder="搜索创意">
          </div>
          <button type="submit" class="am-btn am-btn-default am-btn-sm">搜索</button>
        </form>
  </div>
  </div>
  <hr>
<div id="idea_body">
       <script>
       
       function getPostOwnerInfo(id){
          $.ajax({
                method: "GET",
                url: "<%= welcome_get_user_info_path %>",
                beforeSend: function( xhr ) {
                  xhr.overrideMimeType( "text/plain; charset=utf-8" );
                 },
                data: {id: id},
                dataType: "json"
              }).done(function( msg ){ 
                $('#my-alert .idea_author_name').html(msg.name);
              }).fail(function(){alert('请等待服务器');});

       }
        function popAlert(post_id){
            var $modal = $('#my-alert');
            var $modal_landing = $('#my-modal-loading');
            
            
            $.ajax({
                method: "GET",
                url: "<%= welcome_get_one_post_path %>",
                beforeSend: function( xhr ) {
                  xhr.overrideMimeType( "text/plain; charset=utf-8" );
                  $modal_landing.modal();
                 },
                data: {id: post_id},
                dataType: "json"
              }).done(function( msg ) {
                  $modal_landing.modal('close');
                  $('#my-alert .am-modal-hd').html(msg.title);
                  $('#my-alert article').html(msg.content);
                  getPostOwnerInfo(msg.user_id.$oid.toString())

                  $modal.modal();
              }).fail(function(){alert('请等待服务器');});
            }
        
        
        </script>
<% @posts.each do |post| %>
<div class="box">
    <div class="pic">

      <% if post[2] %>
      <% if post[2][0] %>
      <% image_item = ImageItem.find(post[2][0]) %>
        <% if image_item.url and image_item.url.to_s != '' %>
        <a class="al-alert"  href="#"><%= image_tag image_item.url, alt: '图片' %></a>
        <% elsif image_item.url_from_content and image_item.url_from_content.to_s != '' %>
       <a class="al-alert"  href="javascript:popAlert('<%= post[0].to_s %>')"><img src='<%= image_item.url_from_content.to_s %>', alt: '图片' %></a>

        <% else %>
        <a class="al-alert" href="javascript:popAlert('<%= post[0].to_s %>')"><%= image_tag 'default.jpg', alt: '图片' %></a>
        <% end %>
      <% else%>
        <a class="al-alert"  href="javascript:popAlert('<%= post[0].to_s %>')"><%= image_tag 'default.jpg', alt: '图片' %></a>
      <% end %>
 <% else %>
        <a class="al-alert" href="javascript:popAlert('<%= post[0].to_s %>')" ><%= image_tag 'default.jpg', alt: '图片' %></a>
      <% end %>

        <!-- <img src="images/1.jpg" alt="图片" /> -->
  <div class="ideaTitle1"><a href="javascript:popAlert('<%= post[0] %>')">
  <h3><%= post[1] %></h3></a>
  </div>
  <hr>

 <hr>
  <div class="ideaClassify">#文化娱乐体育#</div>
  <div style="text-align: center;font-size: small">
    <%= post[3].in_time_zone.to_s[0..-6] %>
  </div>
</div>
</div>
<% end %>

</div>


<!--
<footer>
  <hr>
  <p class="am-padding-left">© 2015 , Ulaiber in Shenzhen of China</p>
</footer>
-->

<!--[if (gte IE 9)|!(IE)]><    !-->
<!--
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/amazeui.min.js"></script>
<script src="assets/js/app.js"></script>
-->
<!--<script src="assets/js/waterfall.js"></script>-->
<script>
$(function() {
    var $modal = $('#my-popup');
    <% if session[:progress] %>
      var session_exist = true;
    <% else %>
      var session_exist = false;
    <% end %>
    $modal.siblings('#post_btn').on('click', function(e) {
      var $target = $(e.target);
        if (session_exist== true) {
          $modal.modal();
        }else{
          $modal.modal('close');
          alert("请先登录！");
          window.location.assign('<%= root_url %>/user_sessions/new');
        }
    });
    
   
    
  });
    
    
var hArr=[];//存放图片的高度，开始存第一行的四张图片的高度，之后存每一列的高度；
var oBoxW = 0;
var xmlhttp;
if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
}
else {
    xmlhttp = new ActiveXObject(Microsoft.XMLHTTP);
};
xmlhttp.open('GET', 'http://localhost:3000/posts/all', 'true');
xmlhttp.send();
    if (xmlhttp.readyState === 4) {
        //     var data_length = xmldate.getElementsByTagName('title').length
        //     for(var i =0;i< data_length;i++){
        //         var titledata=xmldate.getElementsByTagName('title')[i].innerHTML);
        //     }
        alert(xmlhttp.responseXML);
    }
//
//
$(function() {
  $('#doc-prompt-toggle').on('click', function() {
    $('#my-prompt').modal({
      relatedTarget: this,
      onConfirm: function(e) {
        alert('你已经成功提交创意：' + e.data || '')
      },
      onCancel: function(e) {
        alert('放弃!');
      }
    });
  });
});
window.onload=function(){
waterfall('idea_body','box');  //封装一个waterfall函数；
//var dateInt={"date":[{"src":'1.jpg'},{"src":'2.jpg'},{"src":'3.jpg'},{"src":'4.jpg'},]} //模拟后台数
window.onscroll=function(){
   if(checkScrollSlide){
       var oParent=document.getElementById('idea_body');
      //将数据块渲染到页面
       var dateInt=[{"img":"/assets/default.jpg","title":"项目标题","intruduce":"项目简介","Classify":"#项目分类#"},{"img":"/assets/default.jpg","title":"项目标题1","intruduce":"项目简介1","Classify":"#项目分类1#"}]
            for(var i=0;i<dateInt.length;i++){
           var oBox=document.createElement('div');
           oBox.className='box';
           oParent.appendChild(oBox);   //将子元素塞进父元素里面
           var oPic=document.createElement('div');
           oPic.className='pic';
           oBox.appendChild(oPic);
           var oImgA=document.createElement('a')
           oPic.appendChild(oImgA)
           var oImg=document.createElement('img')
           oImg.src=dateInt[i].img;
           oImgA.appendChild(oImg);
           var oIdea=document.createElement('div');
           oIdea.className='ideaTitle';
           oPic.appendChild(oIdea);
           var oHr=document.createElement('h3');
           oIdea.appendChild(oHr);
           oHr.innerHTML=dateInt[i].title;
           var hr1=document.createElement('hr');
           oPic.appendChild(hr1);
           var oIntruduce=document.createElement('div');
           oIntruduce.className='ideaIntruduce';
            oPic.appendChild(oIntruduce);
           var oA=document.createElement('a');
           oIntruduce.appendChild(oA);
           oA.innerHTML=dateInt[i].intruduce;
           var hr1=document.createElement('hr');
           oPic.appendChild(hr1);
            var oClassify=document.createElement('div');
           oClassify.className='ideaClassify';
            oPic.appendChild(oClassify);
           oClassify.innerHTML=dateInt[i].Classify;
           var minH=Math.min.apply(null,hArr);//第二行，求最小值
            var index=getMinhIndex(hArr,minH);
            hArr[index] += oBox.offsetHeight;//oBox.offsetHeight;
            oBox.style.position='absolute';
            oBox.style.top=minH+'px';
            oBox.style.left=oBoxW*index+'px';
       } //for
 }
}
}
function waterfall(parent,box){
    var Oparent=document.getElementById(parent);//取出父元素；
    var oBoxs=getByClass(Oparent,box);
    //计算每行可以放多少列图片（页面宽度/box盒子宽度）
    oBoxW=oBoxs[0].offsetWidth;
    var
    cols=Math.floor(document.documentElement.clientWidth/oBoxW);
Oparent.style.cssText='width:'+oBoxW*cols+'px;margin:0 auto;'//设置idea_body的宽度
    for(var i=0;i<oBoxs.length;i++){
        if(i<cols){
            hArr.push(oBoxs[i].offsetHeight);//将第一行盒子高度放入hArr数组中
        }
        else{
            var minH=Math.min.apply(null,hArr);//第二行，求最小值
            var index=getMinhIndex(hArr,minH);
            oBoxs[i].style.position='absolute';
            oBoxs[i].style.top=minH+'px';
            oBoxs[i].style.left=oBoxW*index+'px';
            hArr[index]+=oBoxs[i].offsetHeight;
        }
    }
}
    function getByClass(parent,clsName){
        var boxArr=new Array();//用来获取所有class为parent的box的元素
        oElements=parent.getElementsByTagName('*')//获取父元素下所有的子元素
        for(var i=0;i<oElements.length;i++){
            if(oElements[i].className==clsName){
                boxArr.push(oElements[i]);
            }//判断传过来的
        }
        return boxArr;
    }//封装一个函数，用于取出idea_body下的所有box函数
    function  getMinhIndex(arr,val){
    for(var i in arr){
        if(arr[i]==val){
        return i;
        }
    }
    }
      function checkScrollSlide(){
    var oParent=document.getElementById('idea_body');
    var oBoxs=getByClass(oParent,'box');
    var lastBoxH=oBoxs[oBoxs.length-1].offsetTop+Math.floor(oBoxs[oBoxs.length-1].offsetHeight/2);
    var scrollTop=document.body.scrollTop || document.documentElement.scrollTop;
        var height=document.body.clientHeight || document.documentElement.clientHeight;
        return(lastBoxH<scrollTop+height)?true:false;
    }
</script>
